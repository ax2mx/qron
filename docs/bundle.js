!function(){"use strict";let e,t=0,n=!0,o=!0,c=!0,u=!0,r=300,a=function(){console.log("isLight: ",u),u?(document.querySelector("#theme").href="css/dark.css",u=!1):(document.querySelector("#theme").href="css/light.css",u=!0),localStorage.setItem("theme",!u)};const i=document.querySelector("#play"),s=document.querySelector("#reset"),l=document.querySelector("#play-timer"),d=document.querySelector("#reset-timer"),m=document.querySelector("#sound-switcher"),y=document.querySelector("#theme-toggle"),S=document.querySelector("#s_ms"),v=document.querySelector("#s_seconds"),f=document.querySelector("#s_minutes"),h=document.querySelector("#s_hours"),g=document.querySelector("#input-hours"),q=document.querySelector("#input-minutes"),b=document.querySelector("#input-seconds"),p=document.querySelector(".mode-chrono"),w=document.querySelector(".mode-timer"),I=document.querySelector(".chrono"),L=document.querySelector(".timer");function T(){I.hidden=!I.hidden,L.hidden=!L.hidden,localStorage.setItem("ui",I.hidden)}function k(e,t,n,o){return(e=Math.floor(e/t)%n).toString().padStart(o,"0")}function E(){m.className=c?"sound sound-off":"sound sound-on",c=!c,localStorage.setItem("sound",!c)}function A(){return r=3600*+g.value+60*+q.value+ +b.value,r}function C(){g.value=k(r,3600,3600,2),q.value=k(r,60,60,2),b.value=k(r,1,60,2)}function N(e){localStorage.setItem("chrono",e)}function x(){e=setTimeout((function t(){C(),r<=0?(clearTimeout(e),function(){const e=setInterval(()=>{a()},300);setTimeout(()=>{clearInterval(e)},2700)}(),c&&function(){const e=setInterval(()=>{_(440,.15),setTimeout(()=>{_(880,.15)},150)},600);setTimeout(()=>{clearInterval(e)},2400)}(),setTimeout(()=>{O()},3e3)):(r--,e=setTimeout(t,1e3))}),0)}function K(){+A(g.value,q.value,b.value)?o?(o=!1,b.setAttribute("readonly",!0),q.setAttribute("readonly",!0),g.setAttribute("readonly",!0),l.className="button button-stop m1",x()):(o=!0,l.className="button button-start m1",clearTimeout(e)):q.value=30}function O(){void 0!==e&&clearTimeout(e),o=!0,l.className="button button-start m1",A(),r=localStorage.getItem("timer"),C(),b.readOnly=!1,q.readOnly=!1,g.readOnly=!1}function _(e,t){const n=new(window.AudioContext||window.webkitAudioContext),o=n.createOscillator();o.type="sine",o.frequency.setValueAtTime(e,n.currentTime),o.connect(n.destination),o.start(),o.stop(n.currentTime+t)}function D(){n?(n=!1,t-=Date.now(),i.className="button button-stop m1"):(n=!0,t+=Date.now(),N(t),i.className="button button-start m1"),F()}function Z(){t=0,N(t),n=!0,i.className="button button-start m1",F()}function F(){let e=n?t:Date.now()+t;S.textContent=k(e,1,1e3,3),v.textContent=k(e,1e3,60,2),f.textContent=k(e,6e4,60,2),h.textContent=k(e,36e5,60,2),n||requestAnimationFrame(F)}document.querySelector("#timer-input").addEventListener("change",(function(e){"input-hours"===e.target.id?e.target.value%=24:e.target.value%=60;A(),C(),localStorage.setItem("timer",r)})),document.addEventListener("keydown",(function(e){"KeyC"===e.code&&T();"KeyX"===e.code&&a();I.hidden?("Space"===e.code&&K(),"KeyZ"===e.code&&O(),"KeyS"===e.code&&E()):("Space"===e.code&&D(),"KeyZ"===e.code&&Z())})),window.addEventListener("load",(function(){"true"===localStorage.getItem("theme")&&a();"true"===localStorage.getItem("ui")&&T();"true"===localStorage.getItem("sound")&&E()})),p.addEventListener("click",T),w.addEventListener("click",T),i.addEventListener("click",D),s.addEventListener("click",Z),l.addEventListener("click",K),d.addEventListener("click",O),y.addEventListener("click",a),m.addEventListener("click",E),O()}();
